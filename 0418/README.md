# 4월 18일 수업내용

## 6.1 프로세스

- **정의**: 실행 중인 프로그램을 "프로세스"라고 하며, 고유한 PID(프로세스 ID)를 갖는다.
- **종류**:
  - 시스템 프로세스: 시스템 운영에 필요한 데몬 등
  - 사용자 프로세스: 사용자의 명령이나 프로그램 실행에 의해 생성
- **부모 프로세스**: 모든 프로세스는 부모 프로세스에 의해 생성됨
- **프로세스 상태 확인 명령어**:
  - `ps`: 현재 프로세스 목록 확인
  - `ps -ef`: 전체 프로세스 상세 출력
  - `pgrep [옵션] [패턴]`: 특정 이름의 프로세스 검색
    - `-l`: PID와 이름
    - `-f`: 전체 명령어 경로
    - `-n`: 최근 생성된 프로세스
    - `-x`: 정확히 일치하는 프로세스
    - `-a`: PID와 명령어 라인 전체

## 6.2 작업 제어

- **후면 실행**: `명령어 &`로 실행하면 쉘이 기다리지 않고 곧바로 제어권을 반환
- **쉘 정지**: `sleep`, `Ctrl+Z`로 실행 중지 가능
- **작업 전환**:
  - `fg`: 후면 작업을 전면으로 전환
  - `bg`: 정지된 작업을 후면으로 전환
- **입출력 리디렉션**:
  - 출력: `명령어 > 파일 &`
  - 입력: `명령어 < 파일 &`
  - 파이프 사용 가능: `명령어 | mail user &`

## 6.3 프로세스 제어

- **종료**:
  - `kill PID` 또는 `kill %작업번호`: 프로세스 종료
  - `exit [코드]`: 현재 셸 종료
- **대기**:
  - `wait PID`: 특정 자식 프로세스가 종료될 때까지 대기
  - `wait`: 모든 자식 프로세스 종료 대기
- **우선순위 설정**:
  - `nice`: 실행 시 우선순위 설정 (기본 0, 범위 -20 ~ 19)
  - `renice`: 실행 중인 프로세스 우선순위 조정
    - `-p PID`: 특정 PID에 적용
    - `-u 사용자`, `-g 그룹` 옵션 지원

## 6.4 프로세스의 사용자 ID

- **UID와 GID**:
  - 프로세스는 실제 사용자 ID(real UID)와 유효 사용자 ID(effective UID)를 가진다.
  - `id`, `$UID`, `$EUID` 명령어로 확인 가능
- **실제/유효 ID 차이**:
  - 보통 일치하지만, setuid/setgid 실행파일 실행 시 유효 ID 변경됨
- **set-user-id 실행파일**:
  - 실행 시 프로세스의 유효 UID가 해당 파일 소유자 ID로 변경됨
  - 예: `/bin/passwd` 실행 시 일반 사용자도 `/etc/shadow` 접근 가능
- **설정 방법**:
  - `chmod 4755 파일` 또는 `chmod u+s 파일`: set-user-id
  - `chmod 2755 파일` 또는 `chmod g+s 파일`: set-group-id

## 6.5 시그널과 프로세스

- **시그널 정의**: 소프트웨어 인터럽트, 예기치 않은 사건 발생 시 사용
- **주요 시그널**:
  - `SIGINT`: Ctrl+C
  - `SIGTSTP`: Ctrl+Z
  - `SIGKILL`: 강제 종료 (무조건)
  - `SIGTERM`: 기본 종료 신호
  - `SIGSTOP`, `SIGCONT`: 중지 및 재개
  - `SIGCHLD`, `SIGALRM`, `SIGSEGV`, `SIGUSR1/2` 등
- **시그널 확인**: `kill -l` 명령으로 전체 시그널 번호/이름 확인 가능
- **시그널 전송 명령어**:
  - `kill -[시그널] PID` 또는 `kill -[시그널] %작업번호`
  - 예: `kill -9 1234`, `kill -STOP 1234`, `kill -CONT 1234`